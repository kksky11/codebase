'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ifProp = exports.get = undefined;

var _get2 = require('lodash/get');

var _get3 = _interopRequireDefault(_get2);

var _at = require('lodash/at');

var _at2 = _interopRequireDefault(_at);

var _values = require('lodash/values');

var _values2 = _interopRequireDefault(_values);

var _difference = require('lodash/difference');

var _difference2 = _interopRequireDefault(_difference);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Returns the value of `props[path]` or `defaultValue`
 * @example
 * const Button = styled.button`
 *  color: ${get('color', 'red')};
 * `
 */
const get = exports.get = (path, defaultValue) => (props = {}) => (0, _get3.default)(props, path, defaultValue);

/**
 * Returns `pass` if prop is truthy. Otherwise returns `fail`
 * @example
 * // usage with styled-theme
 * import styled from 'styled-components'
 * import { ifProp } from 'styled-tools'
 * import { palette } from 'styled-theme'
 *
 * const Button = styled.button`
 *  background-color: ${ifProp('transparent', 'transparent', palette(0))};
 *  color: ${ifProp(['transparent', 'accent'], palette('secondary', 0))};
 *  font-size: ${ifProp({ size: 'large' }, '20px', ifProp({ size: 'medium' }, '16px', '12px'))};
 *`
 */
const ifProp = exports.ifProp = (needle, pass, fail) => (props = {}) => {
  let result;
  if (Array.isArray(needle)) {
    result = !(0, _at2.default)(props, needle).filter(value => !value).length;
  } else if (typeof needle === 'object') {
    const needleKeys = Object.keys(needle);
    const needleValues = (0, _values2.default)(needle);
    result = !(0, _difference2.default)((0, _at2.default)(props, needleKeys), needleValues).length;
  } else {
    result = (0, _get3.default)(props, needle);
  }
  return result ? pass : fail;
};